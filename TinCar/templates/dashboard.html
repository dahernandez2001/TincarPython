{% extends "layout.html" %}

{% block content %}
<div class="dashboard-container">
  <!-- Mensaje de bienvenida y opciones -->
  <div class="welcome-container">
    <h2>Bienvenido, {{ name }}!</h2>
    
    {% if role == "arrendador" %}
      <h3>¿A dónde quieres ir hoy?</h3>
      <a href="#" class="btn reserve-btn">Apartar Parqueadero</a>
    {% elif role == "conductor" %}
      <h3>Panel de Conductor</h3>
      <p>Aquí puedes ver autos disponibles y tus reservas.</p>
    {% else %}
      <p>Rol desconocido: {{ role }}</p>
    {% endif %}
    
    <div class="buttons" style="margin-top: 20px;">
      <a href="{{ url_for('logout') }}" class="btn logout-btn">Cerrar Sesión</a>
    </div>
  </div>

  <!-- Mapa independiente -->
  {% if role == "arrendador" %}
    <div id="map"></div>
  {% endif %}
</div>

{% if role == "arrendador" %}
<!-- Leaflet para el mapa -->
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

<script>
const bogotaLat = 4.7110;
const bogotaLng = -74.0721;

const map = L.map('map').setView([bogotaLat, bogotaLng], 12);

L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    attribution: '&copy; OpenStreetMap contributors'
}).addTo(map);

L.marker([bogotaLat, bogotaLng]).addTo(map)
  .bindPopup('Bogotá')
  .openPopup();
</script>
{% endif %}
{% endblock %}
